<!DOCTYPE HTML>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="/aaa_layouts/admin/layout_admin">

<head> 
    <title>Entrada</title> 
	<link rel="stylesheet" type="text/css" href="#" th:href="@{/css/clientes/entrada_styles.css}">
</head>
<body>

    <header layout:fragment="header">
    	<p> Por si falla el nav </p>
    </header>
    
       
   <section layout:fragment="custom-content" class="document__content">
  			<!-- aqui escribimos todo lo que va en el contenido -->

		<form method="post" action="#" th:action="@{/admin/procesarAsignacion}" autocomplete="off">
		    


		  
		  
		  
		  	<div th:switch="${repartidor_elegido==null}">
			    <div th:case="true" class="col-sm order-last">
			    	<div class="form-group">
					  	 <label for="poblacion">Seleccionar Repartidor</label>
					      
					     <select name="idRepartidor">
				      		<option value="default"> </option>
				    		<option th:each="repartidores: ${lista_repartidores}" 
				    		th:value="${repartidores.getId().toString()}"
				    		th:text="${repartidores.getNombre()}+' '+${repartidores.getApellidos()}"/>
				        </select>
				  	</div>

			    </div>
			    <div th:case="false" class="col-sm order-last">
					
					<div class="form-group">
					  	 <label for="poblacion">Seleccionar Repartidor</label>
					      
					     <select name="idRepartidor">
				      		<option th:text="${repartidor_elegido.getNombre()}+' '+${repartidor_elegido.getApellidos()}" th:value="${repartidor_elegido.getId().toString()}"> </option>
				    		<option th:each="repartidores: ${lista_repartidores}" 
				    		th:value="${repartidores.getId().toString()}"
				    		th:text="${repartidores.getNombre()}+' '+${repartidores.getApellidos()}"/>
				        </select>
				  	</div>
					
			    </div>
			</div>	
		  
		  
		  

	 		<div th:switch="${mapa.get('ESTADO_EN_ESPERA_DE_MANDAR').isEmpty()}">
			    <div th:case="true" class="col-sm order-last">
			    	<p>No ha pedidos para asignar</p>
			    </div>
			    <div th:case="false" class="col-sm order-last">
			    	<h1>Pedidos</h1>
			    	<br>
			       <table class="tabla__pedidos">
		                  <thead class="tabla__info">
		                      <tr>
		                          <td></td>
		                          <td></td>
		                 		  <td></td>
		                      </tr>
		                  </thead>
		                  <tbody>
		                 		<tr th:each="pedido : ${mapa.get('ESTADO_EN_ESPERA_DE_MANDAR')}">
		                  			 <td th:text="${pedido.getPuntoReparto().getDireccion()}"></td> 
		                             <td th:text="${pedido.getPuntoReparto().getNombre_cliente()}+ ' ' + ${pedido.getPuntoReparto().getApellidos_cliente()}"></td> 
		                             <td>
											<button type="submit" class="btn btn-primary btn-block btn-lg" 
											id="idPedido" 
											name="idPedido"
											th:value="${pedido.getId().toString()}"
											>Asignar</button>			                      	       

		                             </td>
		                     	</tr>
		                  </tbody>
		              </table>
			    </div>
			</div>	


	 		<div th:switch="${repartidor_elegido==null}">
			    <div th:case="true" class="col-sm order-last">
			    	<p>No hay nada seleccionado</p>
			    </div>
			    <div th:case="false" class="col-sm order-last">
					
					<h2 th:text="${repartidor_elegido.getNombre()}+' '+${repartidor_elegido.getApellidos()}"></h2>
					
					<!-- Tabla con la ruta reparto completa aqui -->
					<div th:case="false" class="col-sm order-last">
			    	<h1>Pedidos</h1>
			    	<br>
			       <table class="tabla__pedidos">
		                  <thead class="tabla__info">
		                      <tr>
		                          <td></td>
		                          <td></td>
		                 		  <td></td>
		                      </tr>
		                  </thead>
		                  <tbody>
		                 		<tr th:each="pedido : ${lista_pedidos_repartidor}">
		                  			 <td th:text="${pedido.getPuntoReparto().getDireccion()}"></td> 
		                             <td th:text="${pedido.getPuntoReparto().getNombre_cliente()}+ ' ' + ${pedido.getPuntoReparto().getApellidos_cliente()}"></td> 
		                             <td>
											<button type="submit" class="btn btn-primary btn-block btn-lg" 
											id="idPedido" 
											name="idPedido"
											th:value="${pedido.getId().toString()}"
											>Asignar</button>			                      	       

		                             </td>
		                     	</tr>
		                  </tbody>
		              </table>
			    </div>
					
					<!-- Mapa enseñando todos los elementos de la ruta de reparto
						aqui -->
					
			    </div>
			</div>	
		    
		</form>

	</section>


</body>


</html>
